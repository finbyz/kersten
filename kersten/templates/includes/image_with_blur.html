<img src="{{ src or '' }}" class="{{ resolve_class(class) }}" alt="{{ alt or '' }}" />

<script>
	document.addEventListener('DOMContentLoaded', loadStuff);

	function loadStuff() {
		let images = document.querySelectorAll('img[data-src]');

		for (let image of images) {
			let img = new Image();
			let image_source = image.dataset.src;

			img.onload = function () {
				image.src = image_source;
				image.classList.add('image-loaded');
			};

			if (image_source) {
				img.src = image_source;
			}
		}
	};
</script>
